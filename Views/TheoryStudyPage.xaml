<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EducationalPlatform.Views.TheoryStudyPage"
             Title="Ð˜Ð·ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐ¾Ñ€Ð¸Ð¸">

    <Grid RowDefinitions="Auto,*,Auto">

        <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
        <Border Grid.Row="0" BackgroundColor="{DynamicResource PrimaryColor}" Padding="15">
            <HorizontalStackLayout>
                <Label x:Name="TitleLabel" 
                       Text="Ð¢ÐµÐ¾Ñ€Ð¸Ñ" 
                       FontSize="20" 
                       TextColor="White" 
                       FontAttributes="Bold"
                       VerticalOptions="Center" />
                <Button Text="ÐÐ°Ð·Ð°Ð´" 
                        Clicked="OnBackClicked"
                        BackgroundColor="Transparent"
                        TextColor="White"
                        Margin="20,0,0,0" />
            </HorizontalStackLayout>
        </Border>

        <!-- Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ Ñ‚ÐµÐ¾Ñ€Ð¸Ð¸ -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20" Spacing="15">
                <Label x:Name="ContentLabel" 
                       FontSize="16"
                       LineBreakMode="WordWrap" />

                <!-- ÐŸÑ€Ð¸ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ -->
                <StackLayout x:Name="AttachmentsSection" IsVisible="False">
                    <Label Text="ÐŸÑ€Ð¸ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹:" 
                           FontSize="16" 
                           FontAttributes="Bold"
                           TextColor="{DynamicResource PrimaryColor}" />
                    <CollectionView x:Name="AttachmentsCollection">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Border BackgroundColor="#F0F8FF" 
                                        Padding="10" 
                                        Margin="0,5">
                                    <HorizontalStackLayout Spacing="10">
                                        <Label Text="ðŸ“Ž" FontSize="16" />
                                        <Label Text="{Binding .}" 
                                               FontSize="14"
                                               LineBreakMode="TailTruncation" />
                                        <Button Text="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ" 
                                                Clicked="OnOpenAttachmentClicked"
                                                CommandParameter="{Binding .}"
                                                BackgroundColor="{DynamicResource PrimaryColor}"
                                                TextColor="White"
                                                Padding="10,5" />
                                    </HorizontalStackLayout>
                                </Border>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </StackLayout>
            </VerticalStackLayout>
        </ScrollView>

        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ -->
        <Grid Grid.Row="2" ColumnDefinitions="*,*" ColumnSpacing="10" Padding="15">
            <Button x:Name="PrevButton" 
                    Text="â¬…ï¸ ÐŸÑ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ð¹" 
                    Clicked="OnPrevClicked"
                    IsVisible="False" />
            <Button x:Name="NextButton" 
                    Text="Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ âž¡ï¸" 
                    Clicked="OnNextClicked"
                    BackgroundColor="{DynamicResource PrimaryColor}"
                    TextColor="White" />
        </Grid>

    </Grid>
</ContentPage>