<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EducationalPlatform.Views.CreatePracticePage"
             Title="Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ¸">

    <Grid RowDefinitions="Auto,*">
        <!-- Ð¡Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
        <Border Grid.Row="0"
                BackgroundColor="{DynamicResource PrimaryColor}"
                Padding="20,15"
                StrokeThickness="0">
            <Label Text="Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ" 
                   FontSize="22"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalOptions="Center"
                   VerticalOptions="Center" />
        </Border>

        <ScrollView Grid.Row="1" BackgroundColor="{DynamicResource BackgroundColor}">
            <VerticalStackLayout Spacing="20" Padding="20">

                <Border BackgroundColor="White"
                    Stroke="#E0E0E0"
                    StrokeThickness="1"
                    StrokeShape="RoundRectangle 12"
                    Padding="20">
                    <VerticalStackLayout Spacing="18">

                        <!-- ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ -->
                        <Label Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ:" Style="{DynamicResource StandardLabelStyle}"/>
                        <Entry x:Name="TitleEntry" Placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ" />

                        <Label Text="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:" Style="{DynamicResource StandardLabelStyle}"/>
                        <Editor x:Name="DescriptionEditor" HeightRequest="100" />

                        <Label Text="Ð¢Ð¸Ð¿ Ð¾Ñ‚Ð²ÐµÑ‚Ð°:" Style="{DynamicResource StandardLabelStyle}"/>
                        <Picker x:Name="AnswerTypePicker">
                            <Picker.Items>
                                <x:String>text</x:String>
                                <x:String>code</x:String>
                                <x:String>file</x:String>
                            </Picker.Items>
                        </Picker>

                        <!-- Ð”Ð»Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ -->
                        <StackLayout x:Name="CodeSection" IsVisible="False">
                            <Label Text="Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¾Ð²Ñ‹Ð¹ ÐºÐ¾Ð´:" Style="{DynamicResource StandardLabelStyle}"/>
                            <Editor x:Name="StarterCodeEditor" HeightRequest="150" />
                        </StackLayout>

                        <!-- ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ -->
                        <Label Text="ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚/Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ:" Style="{DynamicResource StandardLabelStyle}"/>
                        <Editor x:Name="ExpectedAnswerEditor" HeightRequest="100" />

                        <Label Text="ÐŸÐ¾Ð´ÑÐºÐ°Ð·ÐºÐ°:" Style="{DynamicResource StandardLabelStyle}"/>
                        <Editor x:Name="HintEditor" HeightRequest="80" />

                        <!-- Ð¡ÐµÐºÑ†Ð¸Ñ Ð¿Ñ€Ð¸ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² (ÐºÐ°Ðº Ð² Ñ‚ÐµÐ¾Ñ€Ð¸Ð¸) -->
                        <Border BackgroundColor="#F0F7FF"
                            Stroke="{DynamicResource PrimaryColor}"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 10"
                            Padding="15"
                            Margin="0,10,0,0">
                            <VerticalStackLayout Spacing="12">

                                <Label Text="ÐŸÑ€Ð¸ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹:" 
                                   FontSize="16" 
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource PrimaryColor}" />

                                <Label Text="ÐœÐ°ÐºÑ. Ñ€Ð°Ð·Ð¼ÐµÑ€: 50 ÐœÐ‘. ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ðµ: ZIP, PDF, Word, PowerPoint, Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ" 
                                   FontSize="12" 
                                   TextColor="Gray" />

                                <Button Text="Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹" 
                                    Clicked="OnSelectFilesClicked"
                                    BackgroundColor="{DynamicResource SecondaryColor}"
                                    TextColor="White"
                                    CornerRadius="8"
                                    HeightRequest="45"
                                    FontSize="16" />

                                <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² Ñ Ð¸ÐºÐ¾Ð½ÐºÐ°Ð¼Ð¸ -->
                                <CollectionView x:Name="AttachmentsCollection" 
                                          HeightRequest="150"
                                          IsVisible="False">
                                    <CollectionView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid ColumnDefinitions="Auto,*,Auto,Auto" 
                                              Padding="12" 
                                              BackgroundColor="White"
                                              Margin="0,4">

                                                <!-- Ð˜ÐºÐ¾Ð½ÐºÐ° Ñ„Ð°Ð¹Ð»Ð° -->
                                                <Label Grid.Column="0"
                                                   Text="{Binding FileIcon}"
                                                   FontSize="16"
                                                   VerticalOptions="Center"
                                                   Margin="0,0,10,0"/>

                                                <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ñ„Ð°Ð¹Ð»Ðµ -->
                                                <VerticalStackLayout Grid.Column="1" Spacing="2">
                                                    <Label Text="{Binding FileName}" 
                                                       FontSize="14"
                                                       FontAttributes="Bold"
                                                       LineBreakMode="TailTruncation"/>
                                                    <Label Text="{Binding SizeFormatted}" 
                                                       FontSize="12"
                                                       TextColor="Gray"/>
                                                </VerticalStackLayout>

                                                <!-- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
                                                <Label Grid.Column="2"
                                                   Text="{Binding StatusIcon}"
                                                   FontSize="14"
                                                   VerticalOptions="Center"
                                                   Margin="10,0"
                                                   IsVisible="{Binding IsUploading}"/>

                                                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ -->
                                                <Button Grid.Column="3" 
                                                    Text="ðŸ—‘ï¸"
                                                    Padding="8" 
                                                    Clicked="OnRemoveAttachmentClicked" 
                                                    CommandParameter="{Binding .}"
                                                    BackgroundColor="Transparent"
                                                    TextColor="Red"
                                                    FontSize="16"
                                                    WidthRequest="40"
                                                    HeightRequest="40" />
                                            </Grid>
                                        </DataTemplate>
                                    </CollectionView.ItemTemplate>
                                </CollectionView>

                                <!-- ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
                                <StackLayout x:Name="UploadProgressSection" IsVisible="False" Spacing="8">
                                    <ProgressBar x:Name="UploadProgressBar" 
                                           Progress="0"
                                           HeightRequest="4"/>
                                    <Label x:Name="UploadStatusLabel" 
                                       Text=""
                                       FontSize="12"
                                       HorizontalOptions="Center"/>
                                </StackLayout>

                                <Button x:Name="ClearAllButton"
                                    Text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ñ„Ð°Ð¹Ð»Ñ‹" 
                                    Clicked="OnClearAllFilesClicked"
                                    BackgroundColor="#FF6B6B"
                                    TextColor="White"
                                    IsVisible="False"
                                    CornerRadius="8"
                                    HeightRequest="40" />

                            </VerticalStackLayout>
                        </Border>

                        <!-- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð´Ð»Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð²-Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ð° -->
                        <StackLayout x:Name="FileSettingsSection" IsVisible="False">
                            <Label Text="ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° (ÐœÐ‘):" Style="{DynamicResource StandardLabelStyle}"/>
                            <Entry x:Name="MaxFileSizeEntry" Text="10" Keyboard="Numeric" />

                            <Label Text="Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð½Ñ‹Ðµ Ñ‚Ð¸Ð¿Ñ‹ Ñ„Ð°Ð¹Ð»Ð¾Ð²:" Style="{DynamicResource StandardLabelStyle}"/>
                            <HorizontalStackLayout>
                                <CheckBox x:Name="ZipCheckBox" IsChecked="True" />
                                <Label Text="ZIP" VerticalOptions="Center" />
                                <CheckBox x:Name="ImageCheckBox" IsChecked="True" Margin="10,0,0,0" />
                                <Label Text="Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ" VerticalOptions="Center" />
                                <CheckBox x:Name="PdfCheckBox" IsChecked="True" Margin="10,0,0,0" />
                                <Label Text="PDF" VerticalOptions="Center" />
                            </HorizontalStackLayout>
                        </StackLayout>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,10,0,0">
                            <Button Text="ÐÐ°Ð·Ð°Ð´"
                                Clicked="OnBackClicked"
                                BackgroundColor="#6C757D"
                                TextColor="White"
                                CornerRadius="8"
                                HeightRequest="50"
                                FontSize="16" />
                            <Button Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÑƒ"
                                Clicked="OnCreateClicked"
                                BackgroundColor="{DynamicResource PrimaryColor}"
                                TextColor="White"
                                CornerRadius="8"
                                HeightRequest="50"
                                FontSize="16"
                                FontAttributes="Bold" />
                        </Grid>

                    </VerticalStackLayout>
                </Border>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>