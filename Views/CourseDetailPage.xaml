<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EducationalPlatform.Views.CourseDetailPage"
             Title="Ð”ÐµÑ‚Ð°Ð»Ð¸ ÐºÑƒÑ€ÑÐ°">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <Label x:Name="CourseTitle" 
                   Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÑƒÑ€ÑÐ°" 
                   FontSize="24" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" />

            <!-- Ð“Ñ€ÑƒÐ¿Ð¿Ð¾Ð²Ñ‹Ðµ Ñ‡Ð°Ñ‚Ñ‹ ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ð° -->
            <Frame x:Name="ChatsSection"
                   Style="{DynamicResource StandardFrameStyle}"
                   IsVisible="False">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Ð“Ñ€ÑƒÐ¿Ð¿Ð¾Ð²Ñ‹Ðµ Ñ‡Ð°Ñ‚Ñ‹" FontSize="18" FontAttributes="Bold" />
                    <CollectionView x:Name="StudentChatsCollection" 
                                  ItemsSource="{Binding StudentGroups}"
                                  SelectionMode="Single"
                                  SelectionChanged="OnGroupChatSelected">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,5" 
                                        BackgroundColor="#F8F9FA" 
                                        Stroke="#E0E0E0" 
                                        StrokeThickness="1" 
                                        StrokeShape="RoundRectangle 8" 
                                        Padding="12">
                                    <Grid ColumnDefinitions="Auto,*,Auto" VerticalOptions="Center">
                                        <!-- Ð˜ÐºÐ¾Ð½ÐºÐ° Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ -->
                                        <Label Grid.Column="0" 
                                               Text="ðŸ‘¥" 
                                               FontSize="20" 
                                               VerticalOptions="Center" 
                                               Margin="0,0,10,0" />

                                        <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð³Ñ€ÑƒÐ¿Ð¿Ðµ -->
                                        <VerticalStackLayout Grid.Column="1" Spacing="4">
                                            <Label Text="{Binding GroupName}" 
                                                   FontSize="14" 
                                                   FontAttributes="Bold" />
                                            <Label Text="{Binding StudentCount, StringFormat='Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²: {0}'}" 
                                                   FontSize="11" 
                                                   TextColor="#666" />
                                        </VerticalStackLayout>

                                        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° Ð² Ñ‡Ð°Ñ‚ -->
                                        <Label Grid.Column="2" 
                                               Text="âž¤" 
                                               FontSize="16" 
                                               TextColor="{DynamicResource PrimaryColor}"
                                               VerticalOptions="Center" />
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- Ð¢ÐµÐ¾Ñ€Ð¸Ñ -->
            <Frame Style="{DynamicResource StandardFrameStyle}">
                <VerticalStackLayout Spacing="10">
                    <Label x:Name="TheoryLabel" Text="Ð¢ÐµÐ¾Ñ€Ð¸Ñ" FontSize="18" FontAttributes="Bold" />
                    <CollectionView x:Name="TheoryCollection" 
                                  SelectionMode="Single"
                                  SelectionChanged="OnTheorySelected">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid Padding="10" ColumnDefinitions="*, Auto">
                                    <Label Text="{Binding Title}" 
                                           FontSize="16" 
                                           VerticalOptions="Center" />
                                    <Label Grid.Column="1" 
                                           Text="âž¤" 
                                           FontSize="16" 
                                           VerticalOptions="Center" 
                                           TextColor="{DynamicResource PrimaryColor}"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- ÐŸÑ€Ð°ÐºÑ‚Ð¸ÐºÐ° -->
            <Frame Style="{DynamicResource StandardFrameStyle}">
                <VerticalStackLayout Spacing="10">
                    <Label x:Name="PracticeLabel" Text="ÐŸÑ€Ð°ÐºÑ‚Ð¸ÐºÐ°" FontSize="18" FontAttributes="Bold" />
                    <CollectionView x:Name="PracticeCollection" 
                                  SelectionMode="Single"
                                  SelectionChanged="OnPracticeSelected">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid Padding="10" ColumnDefinitions="*, Auto">
                                    <Label Text="{Binding Title}" 
                                           FontSize="16" 
                                           VerticalOptions="Center" />
                                    <Label Grid.Column="1" 
                                           Text="âž¤" 
                                           FontSize="16" 
                                           VerticalOptions="Center" 
                                           TextColor="{DynamicResource PrimaryColor}"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- Ð¢ÐµÑÑ‚Ñ‹ -->
            <Frame Style="{DynamicResource StandardFrameStyle}">
                <VerticalStackLayout Spacing="10">
                    <Label x:Name="TestsLabel" Text="Ð¢ÐµÑÑ‚Ñ‹" FontSize="18" FontAttributes="Bold" />
                    <CollectionView x:Name="TestsCollection" 
                                  SelectionMode="Single"
                                  SelectionChanged="OnTestSelected">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid Padding="10" ColumnDefinitions="*, Auto">
                                    <Label Text="{Binding Title}" 
                                           FontSize="16" 
                                           VerticalOptions="Center" />
                                    <Label Grid.Column="1" 
                                           Text="âž¤" 
                                           FontSize="16" 
                                           VerticalOptions="Center" 
                                           TextColor="{DynamicResource PrimaryColor}"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- Ð’ ÑÐµÐºÑ†Ð¸Ð¸ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10" Padding="15">
                <Button Text="Ð§Ð°Ñ‚ Ñ Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼" 
            Clicked="OnTeacherChatClicked" 
            BackgroundColor="{DynamicResource SecondaryColor}"
            HeightRequest="50" 
            CornerRadius="10" />
                <Button Text="â† ÐÐ°Ð·Ð°Ð´" 
            Clicked="OnBackClicked"
            BackgroundColor="{DynamicResource PrimaryColor}"
            TextColor="White"
            HeightRequest="50" 
            CornerRadius="10" />
            </Grid>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>