<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EducationalPlatform.Views.EditTheoryPage"
             Title="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ‚ÐµÐ¾Ñ€Ð¸Ð¸">

    <Grid RowDefinitions="Auto,*">
        <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
        <Border Grid.Row="0"
                BackgroundColor="{DynamicResource PrimaryColor}"
                Padding="20,15"
                StrokeThickness="0">
            <Label Text="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ‚ÐµÐ¾Ñ€ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ ÑƒÑ€Ð¾ÐºÐ°" 
                   FontSize="22"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalOptions="Center"
                   VerticalOptions="Center" />
        </Border>

        <ScrollView Grid.Row="1" BackgroundColor="{DynamicResource BackgroundColor}">
            <VerticalStackLayout Spacing="20" Padding="20">

                <Border BackgroundColor="White"
                        Stroke="#E0E0E0"
                        StrokeThickness="1"
                        StrokeShape="RoundRectangle 12"
                        Padding="20">
                    <VerticalStackLayout Spacing="18">

                        <Label Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°:"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="{DynamicResource TextColor}"
                               Margin="0,0,0,5"/>
                        <Border BackgroundColor="#F8F9FA"
                                Stroke="#E0E0E0"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                Padding="0">
                            <Entry x:Name="TitleEntry"
                                   Placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°"
                                   BackgroundColor="Transparent"
                                   Margin="12,0"
                                   FontSize="16"
                                   HeightRequest="50" />
                        </Border>

                        <Label Text="ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº ÑƒÑ€Ð¾ÐºÐ°:"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="{DynamicResource TextColor}"
                               Margin="0,0,0,5"/>
                        <Border BackgroundColor="#F8F9FA"
                                Stroke="#E0E0E0"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                Padding="0">
                            <Entry x:Name="OrderEntry"
                                   Placeholder="1"
                                   Keyboard="Numeric"
                                   BackgroundColor="Transparent"
                                   Margin="12,0"
                                   FontSize="16"
                                   HeightRequest="50" />
                        </Border>

                        <Label Text="Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ:"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="{DynamicResource TextColor}"
                               Margin="0,0,0,5"/>
                        <Border BackgroundColor="#F8F9FA"
                                Stroke="#E0E0E0"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                Padding="0">
                            <Editor x:Name="ContentEditor"
                                    HeightRequest="300"
                                    Placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°..."
                                    AutoSize="TextChanges"
                                    BackgroundColor="Transparent"
                                    Margin="12,10"
                                    FontSize="14" />
                        </Border>

                        <!-- Ð¡ÐµÐºÑ†Ð¸Ñ Ð¿Ñ€Ð¸ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² -->
                        <Border BackgroundColor="#F0F7FF"
                                Stroke="{DynamicResource PrimaryColor}"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 10"
                                Padding="15"
                                Margin="0,10,0,0">
                            <VerticalStackLayout Spacing="12">
                                <Label Text="ðŸ“Ž ÐŸÑ€Ð¸ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹:" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="{DynamicResource PrimaryColor}" />

                                <Label Text="Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð½Ñ‹Ðµ Ñ‚Ð¸Ð¿Ñ‹: ZIP, PDF, Word, PowerPoint, PNG, JPG, TXT, MP4" 
                                       FontSize="12" 
                                       TextColor="Gray" />

                                <Button Text="âž• ÐŸÑ€Ð¸ÐºÑ€ÐµÐ¿Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹" 
                                        Clicked="OnAttachFilesClicked"
                                        BackgroundColor="{DynamicResource SecondaryColor}"
                                        TextColor="White"
                                        CornerRadius="8"
                                        HeightRequest="45"
                                        FontSize="16" />

                                <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ñ€Ð¸ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² -->
                                <CollectionView x:Name="AttachmentsCollection" 
                                              HeightRequest="150"
                                              IsVisible="False">
                                    <CollectionView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid ColumnDefinitions="*,Auto,Auto" 
                                                  Padding="10" 
                                                  BackgroundColor="White"
                                                  Margin="0,2">
                                                <Label Text="{Binding FileName}" 
                                                       FontSize="14"
                                                       VerticalOptions="Center"
                                                       LineBreakMode="TailTruncation" />
                                                <Label Grid.Column="1" 
                                                       Text="{Binding SizeFormatted}" 
                                                       FontSize="12"
                                                       TextColor="Gray"
                                                       VerticalOptions="Center"
                                                       Margin="10,0" />
                                                <!-- Ð—Ð½Ð°Ñ‡Ð¾Ðº ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñ‹ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð° -->
                                                <Button Grid.Column="2" 
                                                        Text="ðŸ—‘ï¸"
                                                        Padding="5" 
                                                        Clicked="OnRemoveAttachmentClicked" 
                                                        CommandParameter="{Binding .}"
                                                        BackgroundColor="Transparent"
                                                        TextColor="Red"
                                                        FontSize="16"
                                                        WidthRequest="40"
                                                        HeightRequest="40" />
                                            </Grid>
                                        </DataTemplate>
                                    </CollectionView.ItemTemplate>
                                </CollectionView>

                                <Button x:Name="ClearAllButton"
                                        Text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ñ„Ð°Ð¹Ð»Ñ‹"
                                        Clicked="OnClearAllFilesClicked"
                                        BackgroundColor="#FF6B6B"
                                        TextColor="White"
                                        IsVisible="False" />

                                <ProgressBar x:Name="UploadProgressBar" 
                                           Progress="0"
                                           IsVisible="False" />
                                <Label x:Name="UploadStatusLabel" 
                                       Text="" 
                                       FontSize="12"
                                       IsVisible="False" />
                            </VerticalStackLayout>
                        </Border>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,10,0,0">
                            <Button Text="ÐÐ°Ð·Ð°Ð´"
                                    Clicked="OnBackClicked"
                                    BackgroundColor="#6C757D"
                                    TextColor="White"
                                    CornerRadius="8"
                                    HeightRequest="50"
                                    FontSize="16" />
                            <Button Text="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ"
                                    Clicked="OnSaveClicked"
                                    BackgroundColor="{DynamicResource PrimaryColor}"
                                    TextColor="White"
                                    CornerRadius="8"
                                    HeightRequest="50"
                                    FontSize="16"
                                    FontAttributes="Bold" />
                        </Grid>

                    </VerticalStackLayout>
                </Border>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>