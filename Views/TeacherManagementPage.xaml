<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="EducationalPlatform.Views.TeacherManagementPage"
    Title="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÑƒÑ€ÑÐ°Ð¼Ð¸">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <Label Text="ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»Ñ" 
                   FontSize="24" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" />

            <!-- Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10" RowSpacing="10">
                <Button Grid.Row="0" Grid.Column="0"
                        Text="ÐžÑ‚Ñ‡ÐµÑ‚Ñ‹"
                        Clicked="OnReportsClicked"
                        BackgroundColor="{DynamicResource PrimaryColor}"
                        TextColor="White"
                        HeightRequest="60"
                        CornerRadius="10" />
                <Button Grid.Row="0" Grid.Column="1"
                        Text="Ð“Ñ€ÑƒÐ¿Ð¿Ñ‹"
                        Clicked="OnGroupsClicked"
                        BackgroundColor="{DynamicResource SecondaryColor}"
                        TextColor="White"
                        HeightRequest="60"
                        CornerRadius="10" />
                <Button Grid.Row="1" Grid.Column="0"
                        Text="Ð¢ÐµÑÑ‚Ñ‹"
                        Clicked="OnTestsClicked"
                        BackgroundColor="{DynamicResource AccentColor}"
                        TextColor="White"
                        HeightRequest="60"
                        CornerRadius="10" />
                <Button Grid.Row="1" Grid.Column="1"
                        Text="Ð§Ð°Ñ‚Ñ‹"
                        Clicked="OnChatsClicked"
                        BackgroundColor="#4CAF50"
                        TextColor="White"
                        HeightRequest="60"
                        CornerRadius="10" />
            </Grid>

            <!-- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ ÐºÑƒÑ€ÑÐ° -->
            <Border BackgroundColor="#F8F9FA" 
                    Stroke="#2E86AB" 
                    StrokeThickness="1" 
                    StrokeShape="RoundRectangle 15" 
                    Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ ÐºÑƒÑ€Ñ" 
                           FontSize="16" 
                           FontAttributes="Bold" />

                    <Entry x:Name="NewCourseNameEntry" 
                           Placeholder="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÑƒÑ€ÑÐ°" />
                    <Editor x:Name="NewCourseDescriptionEditor" 
                            Placeholder="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÐºÑƒÑ€ÑÐ°" 
                            HeightRequest="80" />

                    <!-- Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Pickers Ð² Ð´Ð²Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸ -->
                    <Grid RowDefinitions="Auto,Auto" ColumnDefinitions="*" ColumnSpacing="10" RowSpacing="10">

                        <Picker x:Name="LanguagePicker"
                                Title="Ð¯Ð·Ñ‹Ðº Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ"
                                ItemDisplayBinding="{Binding LanguageName}"
                                Grid.Row="0"
                                HorizontalOptions="FillAndExpand" />

                        <Picker x:Name="DifficultyPicker"
                                Title="Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸"
                                ItemDisplayBinding="{Binding DifficultyName}"
                                Grid.Row="1"
                                HorizontalOptions="FillAndExpand" />

                    </Grid>

                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10" Margin="0,10,0,0">
                        <CheckBox x:Name="IsGroupCourseCheckBox" Grid.Column="0"/>
                        <Label Text="Ð”Ð»Ñ ÑƒÑ‡ÐµÐ±Ð½Ñ‹Ñ… Ð³Ñ€ÑƒÐ¿Ð¿" 
                               Grid.Column="1"
                               VerticalOptions="Center" />
                    </Grid>

                    <Button x:Name="CreateCourseButton" 
                            Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÑƒÑ€Ñ" 
                            BackgroundColor="#2E86AB" 
                            TextColor="White" 
                            Clicked="OnCreateCourseClicked" />
                </VerticalStackLayout>
            </Border>

            <!-- ÐœÐ¾Ð¸ ÐºÑƒÑ€ÑÑ‹ -->
            <Label Text="ðŸ“š ÐœÐ¾Ð¸ ÐºÑƒÑ€ÑÑ‹" 
                   FontSize="20" 
                   FontAttributes="Bold" />

            <CollectionView x:Name="MyCoursesCollectionView">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Margin="0,5" 
                                BackgroundColor="#F8F9FA" 
                                Stroke="#DDD" 
                                StrokeThickness="1" 
                                StrokeShape="RoundRectangle 10" 
                                Padding="15">
                            <VerticalStackLayout Spacing="10">
                                <Grid ColumnDefinitions="*,Auto">
                                    <Label Text="{Binding CourseName}" 
                                           FontSize="16" 
                                           FontAttributes="Bold" />
                                    <Label Grid.Column="1"
                                       Text="{Binding IsPublished, Converter={StaticResource PublishedConverter}}" 
                                       BackgroundColor="{Binding IsPublished, Converter={StaticResource PublishButtonColorConverter}}"
                                       TextColor="White" 
                                       Padding="5,2"
                                       FontSize="10" />
                                </Grid>

                                <Label Text="{Binding Description}" 
                                       FontSize="12" 
                                       TextColor="#666" />

                                <Grid ColumnDefinitions="*,*,*,*" ColumnSpacing="5">
                                    <Button Text="Ð“Ñ€ÑƒÐ¿Ð¿Ñ‹"
                                            BackgroundColor="#4CAF50" 
                                            TextColor="White" 
                                            FontSize="10"
                                            HeightRequest="30"
                                            Clicked="OnManageGroupsClicked" 
                                            CommandParameter="{Binding .}"/>
                                    <Button Text="Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°"
                                            BackgroundColor="#2196F3" 
                                            TextColor="White" 
                                            FontSize="10"
                                            HeightRequest="30"
                                            Clicked="OnCourseStatsClicked" 
                                            CommandParameter="{Binding .}"/>
                                    <Button Text="ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚"
                                            BackgroundColor="#FF9800" 
                                            TextColor="White" 
                                            FontSize="10"
                                            HeightRequest="30"
                                            Clicked="OnManageContentClicked" 
                                            CommandParameter="{Binding .}"/>
                                    <Button Text="{Binding IsPublished, Converter={StaticResource PublishButtonConverter}}"
                                            BackgroundColor="{Binding IsPublished, Converter={StaticResource PublishButtonColorConverter}}"
                                            TextColor="White" 
                                            FontSize="10"
                                            HeightRequest="30"
                                            Clicked="OnPublishCourseClicked" 
                                            CommandParameter="{Binding .}"/>
                                </Grid>
                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Ð Ð°Ð±Ð¾Ñ‚Ñ‹ Ð½Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ -->
            <Border BackgroundColor="#FFF3E0" 
                    Stroke="#FF9800" 
                    StrokeThickness="1" 
                    StrokeShape="RoundRectangle 15" 
                    Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Ð Ð°Ð±Ð¾Ñ‚Ñ‹ Ð½Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ" 
                           FontSize="16" 
                           FontAttributes="Bold" />

                    <CollectionView x:Name="PendingReviewsCollectionView" 
                                   HeightRequest="120">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="2" 
                                        BackgroundColor="White" 
                                        Stroke="#FF9800" 
                                        StrokeThickness="1" 
                                        StrokeShape="RoundRectangle 5" 
                                        Padding="10">
                                    <Grid ColumnDefinitions="*,Auto" VerticalOptions="Center">
                                        <VerticalStackLayout>
                                            <Label Text="{Binding StudentName}" 
                                                   FontSize="12" 
                                                   FontAttributes="Bold" />
                                            <Label Text="{Binding CourseName}" 
                                                   FontSize="10" 
                                                   TextColor="#666" />
                                        </VerticalStackLayout>
                                        <Button Grid.Column="1"
                                                Text="ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ"
                                                BackgroundColor="#FF9800" 
                                                TextColor="White" 
                                                FontSize="10"
                                                HeightRequest="25"
                                                Clicked="OnReviewWorkClicked" 
                                                CommandParameter="{Binding .}"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Border>

            <Button Text="ÐÐ°Ð·Ð°Ð´" 
                    Clicked="OnBackClicked" 
                    BackgroundColor="Transparent" 
                    TextColor="#2E86AB" 
                    BorderColor="#2E86AB" 
                    BorderWidth="1" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>