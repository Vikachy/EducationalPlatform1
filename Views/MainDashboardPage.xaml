<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:animations="clr-namespace:EducationalPlatform.Animations"
    x:Class="EducationalPlatform.Views.MainDashboardPage"
    Title="Ð“Ð»Ð°Ð²Ð½Ð°Ñ">

    <Grid RowDefinitions="Auto,*">
        <!-- Ð¨ÐÐŸÐšÐ Ð¡ ÐÐÐ˜ÐœÐÐ¦Ð˜Ð•Ð™ -->
        <Border Grid.Row="0"
            BackgroundColor="{DynamicResource PrimaryColor}"
            Stroke="{DynamicResource SecondaryColor}"
            StrokeThickness="1"
            StrokeShape="RoundRectangle 0,0,0,20"
            Padding="0">
            <Grid ColumnDefinitions="Auto,*,Auto"
                Padding="20,15"
                VerticalOptions="Center">
                <!-- ÐÐ’ÐÐ¢ÐÐ  Ð˜ Ð˜ÐœÐ¯ -->
                <Border Grid.Column="0"
                    BackgroundColor="White"
                    Stroke="{DynamicResource AccentColor}"
                    StrokeThickness="2"
                    StrokeShape="RoundRectangle 25"
                    WidthRequest="50"
                    HeightRequest="50"
                    VerticalOptions="Center">
                    <Label Text="ðŸ‘¨â€ðŸ’»"
                        FontSize="20"
                        HorizontalOptions="Center"
                        VerticalOptions="Center" />
                </Border>

                <!-- ÐŸÐ Ð˜Ð’Ð•Ð¢Ð¡Ð¢Ð’Ð˜Ð• -->
                <VerticalStackLayout Grid.Column="1"
                    Spacing="2"
                    Padding="15,0"
                    VerticalOptions="Center">
                    <Label x:Name="WelcomeLabel"
                        Text="Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ!"
                        FontSize="16"
                        TextColor="White"
                        FontAttributes="Bold" />
                    <Label x:Name="StatsLabel"
                        Text="Ð¡ÐµÑ€Ð¸Ñ: 0 Ð´Ð½ÐµÐ¹ ðŸ”¥ | Ð’Ð°Ð»ÑŽÑ‚Ð°: 0 ðŸª™"
                        FontSize="12"
                        TextColor="White" />
                </VerticalStackLayout>

                <!-- ÐšÐÐžÐŸÐšÐ ÐÐÐ¡Ð¢Ð ÐžÐ•Ðš -->
                <Button Grid.Column="2"
                    Text="âš™ï¸"
                    Clicked="OnSettingsClicked"
                    BackgroundColor="Transparent"
                    TextColor="White"
                    FontSize="20"
                    WidthRequest="45"
                    HeightRequest="45"
                    CornerRadius="22" />
            </Grid>
        </Border>

        <!-- ÐžÐ¡ÐÐžÐ’ÐÐžÐ™ ÐšÐžÐÐ¢Ð•ÐÐ¢ -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="20" Padding="20">
                <!-- GIF ÐÐÐ˜ÐœÐÐ¦Ð˜Ð¯ ÐžÐ“ÐžÐÐ¬ÐšÐ -->
                <!-- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð¾Ð³Ð½Ñ -->
                <Border BackgroundColor="Black"
        Stroke="{DynamicResource AccentColor}"
        StrokeThickness="2"
        StrokeShape="RoundRectangle 15"
        HeightRequest="150"
        HorizontalOptions="Fill">
                    <Grid>
                        <!-- Ð“Ð¸Ñ„ÐºÐ° Ð¾Ð³Ð½Ñ -->
                        <Image Source="fire_animation.gif"
               Aspect="AspectFill"
               HorizontalOptions="Fill"
               VerticalOptions="Fill" />

                        <!-- Ð¢ÐµÐºÑÑ‚ Ð¿Ð¾Ð²ÐµÑ€Ñ… Ð³Ð¸Ñ„ÐºÐ¸ -->
                        <Label x:Name="StreakFireLabel"
               Text="Ð¡ÐµÑ€Ð¸Ñ: 0 Ð´Ð½ÐµÐ¹ ðŸ”¥"
               FontSize="20"
               TextColor="White"
               FontAttributes="Bold"
               HorizontalOptions="Center"
               VerticalOptions="Center">
                            <Label.Triggers>
                                <EventTrigger Event="Loaded">
                                    <EventTrigger.Actions>
                                        <animations:FireTextAnimationAction />
                                    </EventTrigger.Actions>
                                </EventTrigger>
                            </Label.Triggers>
                        </Label>
                    </Grid>
                </Border>

                <!-- Ð‘Ð«Ð¡Ð¢Ð Ð«Ð• Ð”Ð•Ð™Ð¡Ð¢Ð’Ð˜Ð¯ -->
                <Label Text="ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿"
                    FontSize="20"
                    TextColor="{DynamicResource TextColor}"
                    FontAttributes="Bold" />

                <Grid ColumnDefinitions="*,*"
                    ColumnSpacing="15"
                    RowSpacing="15">
                    <!-- ÐšÐ£Ð Ð¡Ð« -->
                    <Border Grid.Row="0" Grid.Column="0"
                        BackgroundColor="{DynamicResource BackgroundColor}"
                        Stroke="{DynamicResource PrimaryColor}"
                        StrokeThickness="2"
                        StrokeShape="RoundRectangle 15">
                        <VerticalStackLayout Spacing="12" Padding="20">
                            <Label Text="ðŸ“š"
                                FontSize="28"
                                HorizontalOptions="Center" />
                            <Label Text="ÐšÑƒÑ€ÑÑ‹"
                                FontSize="16"
                                FontAttributes="Bold"
                                HorizontalOptions="Center"
                                TextColor="{DynamicResource TextColor}" />
                            <Button Text="Ð˜Ð·ÑƒÑ‡Ð°Ñ‚ÑŒ â†’"
                                Clicked="OnCoursesClicked"
                                BackgroundColor="{DynamicResource PrimaryColor}"
                                TextColor="White"
                                HeightRequest="40"
                                CornerRadius="20"
                                FontAttributes="Bold" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- ÐŸÐ ÐžÐ“Ð Ð•Ð¡Ð¡ -->
                    <Border Grid.Row="0" Grid.Column="1"
                        BackgroundColor="{DynamicResource BackgroundColor}"
                        Stroke="{DynamicResource PrimaryColor}"
                        StrokeThickness="2"
                        StrokeShape="RoundRectangle 15">
                        <VerticalStackLayout Spacing="12" Padding="20">
                            <Label Text="ðŸ“Š"
                                FontSize="28"
                                HorizontalOptions="Center" />
                            <Label Text="ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ"
                                FontSize="16"
                                FontAttributes="Bold"
                                HorizontalOptions="Center"
                                TextColor="{DynamicResource TextColor}" />
                            <Button Text="Ð¡Ð¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ â†’"
                                Clicked="OnProgressClicked"
                                BackgroundColor="{DynamicResource PrimaryColor}"
                                TextColor="White"
                                HeightRequest="40"
                                CornerRadius="20"
                                FontAttributes="Bold" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- Ð”ÐžÐ¡Ð¢Ð˜Ð–Ð•ÐÐ˜Ð¯ -->
                    <Border Grid.Row="1" Grid.Column="0"
                        BackgroundColor="{DynamicResource BackgroundColor}"
                        Stroke="{DynamicResource AccentColor}"
                        StrokeThickness="2"
                        StrokeShape="RoundRectangle 15">
                        <VerticalStackLayout Spacing="12" Padding="20">
                            <Label Text="ðŸ†"
                                FontSize="28"
                                HorizontalOptions="Center" />
                            <Label Text="Ð”Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ"
                                FontSize="16"
                                FontAttributes="Bold"
                                HorizontalOptions="Center"
                                TextColor="{DynamicResource TextColor}" />
                            <Button Text="ÐœÐ¾Ð¸ Ð½Ð°Ð³Ñ€Ð°Ð´Ñ‹ â†’"
                                Clicked="OnAchievementsClicked"
                                BackgroundColor="{DynamicResource AccentColor}"
                                TextColor="White"
                                HeightRequest="40"
                                CornerRadius="20"
                                FontAttributes="Bold" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- ÐœÐÐ“ÐÐ—Ð˜Ð -->
                    <Border Grid.Row="1" Grid.Column="1"
                        BackgroundColor="{DynamicResource BackgroundColor}"
                        Stroke="{DynamicResource SecondaryColor}"
                        StrokeThickness="2"
                        StrokeShape="RoundRectangle 15">
                        <VerticalStackLayout Spacing="12" Padding="20">
                            <Label Text="ðŸ›’"
                                FontSize="28"
                                HorizontalOptions="Center" />
                            <Label Text="ÐœÐ°Ð³Ð°Ð·Ð¸Ð½"
                                FontSize="16"
                                FontAttributes="Bold"
                                HorizontalOptions="Center"
                                TextColor="{DynamicResource TextColor}" />
                            <Button Text="ÐŸÐ¾ÐºÑƒÐ¿Ð°Ñ‚ÑŒ â†’"
                                Clicked="OnShopClicked"
                                BackgroundColor="{DynamicResource SecondaryColor}"
                                TextColor="White"
                                HeightRequest="40"
                                CornerRadius="20"
                                FontAttributes="Bold" />
                        </VerticalStackLayout>
                    </Border>
                </Grid>

                <!-- ÐŸÐÐÐ•Ð›Ð¬ Ð£Ð§Ð˜Ð¢Ð•Ð›Ð¯ (ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾) -->
                <Border x:Name="TeacherPanel"
                    BackgroundColor="{DynamicResource BackgroundColor}"
                    Stroke="{DynamicResource AccentColor}"
                    StrokeThickness="2"
                    StrokeShape="RoundRectangle 15"
                    IsVisible="False"
                    Padding="20">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="ðŸ‘¨â€ðŸ« ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»Ñ"
                            FontSize="18"
                            FontAttributes="Bold"
                            TextColor="{DynamicResource AccentColor}"
                            HorizontalOptions="Center" />
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                            <Button Grid.Column="0"
                                Text="ÐœÐ¾Ð¸ ÐºÑƒÑ€ÑÑ‹"
                                Clicked="OnTeacherPanelClicked"
                                BackgroundColor="{DynamicResource AccentColor}"
                                TextColor="White"
                                HeightRequest="40"
                                CornerRadius="20" />
                            <Button Grid.Column="1"
                                Text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ"
                                Clicked="OnTeacherManagementClicked"
                                BackgroundColor="{DynamicResource SecondaryColor}"
                                TextColor="White"
                                HeightRequest="40"
                                CornerRadius="20" />
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Ð›Ð•ÐÐ¢Ð ÐÐžÐ’ÐžÐ¡Ð¢Ð•Ð™ -->
                <Border BackgroundColor="{DynamicResource BackgroundColor}"
                    Stroke="{DynamicResource PrimaryColor}"
                    StrokeThickness="2"
                    StrokeShape="RoundRectangle 15"
                    Padding="0">
                    <VerticalStackLayout Spacing="0">
                        <!-- Ð—ÐÐ“ÐžÐ›ÐžÐ’ÐžÐš ÐÐžÐ’ÐžÐ¡Ð¢Ð•Ð™ -->
                        <Border BackgroundColor="{DynamicResource PrimaryColor}"
                            StrokeThickness="0"
                            Padding="20,15">
                            <HorizontalStackLayout>
                                <Label Text="ðŸ“¢ ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸"
                                    FontSize="18"
                                    TextColor="White"
                                    FontAttributes="Bold"
                                    VerticalOptions="Center" />
                                <Button Text="Ð’ÑÐµ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸ â†’"
                                    Clicked="OnAllNewsClicked"
                                    BackgroundColor="Transparent"
                                    TextColor="White"
                                    BorderColor="White"
                                    BorderWidth="1"
                                    HeightRequest="35"
                                    CornerRadius="15"
                                    Margin="20,0,0,0" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Ð¡ÐŸÐ˜Ð¡ÐžÐš ÐÐžÐ’ÐžÐ¡Ð¢Ð•Ð™ -->
                        <CollectionView x:Name="NewsCollectionView"
                            HeightRequest="200"
                            SelectionMode="None">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Border Margin="15,10"
                                        BackgroundColor="#F8F9FA"
                                        Stroke="#E0E0E0"
                                        StrokeThickness="1"
                                        StrokeShape="RoundRectangle 10"
                                        Padding="15">
                                        <VerticalStackLayout Spacing="8">
                                            <Label Text="{Binding Title}"
                                                FontSize="16"
                                                FontAttributes="Bold"
                                                TextColor="{DynamicResource TextColor}" />
                                            <Label Text="{Binding Content}"
                                                FontSize="13"
                                                TextColor="#666"
                                                MaxLines="2" />
                                            <Label Text="{Binding PublishedDate, StringFormat='ðŸ“… {0:dd.MM.yyyy}'}"
                                                FontSize="11"
                                                TextColor="#999" />
                                        </VerticalStackLayout>
                                    </Border>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>