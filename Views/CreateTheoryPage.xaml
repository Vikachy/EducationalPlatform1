<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EducationalPlatform.Views.CreateTheoryPage"
             Title="Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ‚ÐµÐ¾Ñ€Ð¸Ð¸">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <Label Text="Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ‚ÐµÐ¾Ñ€ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ ÑƒÑ€Ð¾ÐºÐ°" 
                   FontSize="24" FontAttributes="Bold"
                   HorizontalOptions="Center" />

            <Border Style="{DynamicResource StandardFrameStyle}" Padding="15">
                <VerticalStackLayout Spacing="15">

                    <Label Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°:" Style="{DynamicResource StandardLabelStyle}"/>
                    <Entry x:Name="TitleEntry" Placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°" />

                    <Label Text="ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº ÑƒÑ€Ð¾ÐºÐ°:" Style="{DynamicResource StandardLabelStyle}"/>
                    <Entry x:Name="OrderEntry" Placeholder="1" Keyboard="Numeric" />

                    <Label Text="Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ:" Style="{DynamicResource StandardLabelStyle}"/>
                    <Editor x:Name="ContentEditor" 
                            HeightRequest="200"
                            Placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ° Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ð¼ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼..."
                            AutoSize="TextChanges" />

                    <!-- Ð¡ÐµÐºÑ†Ð¸Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð¾Ð² -->
                    <Frame BackgroundColor="#F8F9FA" Padding="15">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="ÐŸÑ€Ð¸ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹:" 
                                   FontSize="16" 
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource PrimaryColor}" />

                            <Label Text="Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð½Ñ‹Ðµ Ñ‚Ð¸Ð¿Ñ‹: ZIP, PDF, Word, PowerPoint, PNG" 
                                   FontSize="12" 
                                   TextColor="Gray" />

                            <Button Text="ðŸ“Ž Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹" 
                                    Clicked="OnSelectFilesClicked"
                                    BackgroundColor="{DynamicResource SecondaryColor}" />

                            <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² -->
                            <CollectionView x:Name="AttachmentsCollection" 
                                          HeightRequest="120">
                                <CollectionView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid ColumnDefinitions="*,Auto,Auto" 
                                              Padding="10" 
                                              BackgroundColor="White"
                                              Margin="0,2">
                                            <Label Text="{Binding FileName}" 
                                                   FontSize="14"
                                                   VerticalOptions="Center"
                                                   LineBreakMode="TailTruncation" />
                                            <Label Grid.Column="1" 
                                                   Text="{Binding SizeFormatted}" 
                                                   FontSize="12"
                                                   TextColor="Gray"
                                                   VerticalOptions="Center"
                                                   Margin="10,0" />
                                            <Button Grid.Column="2" 
                                                    Text="âŒ" 
                                                    Clicked="OnRemoveAttachmentClicked" 
                                                    CommandParameter="{Binding .}"
                                                    BackgroundColor="Transparent"
                                                    TextColor="Red"
                                                    FontSize="12" />
                                        </Grid>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>

                            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒÑÑ Ð¸Ð· ÐºÐ¾Ð´Ð° -->
                            <Button x:Name="ClearAllButton"
                                    Text="ðŸ—‘ ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ" 
                                    Clicked="OnClearAllFilesClicked"
                                    BackgroundColor="#FF6B6B"
                                    TextColor="White"
                                    IsVisible="False" />

                            <ProgressBar x:Name="UploadProgressBar" 
                                       Progress="0"
                                       IsVisible="False" />
                            <Label x:Name="UploadStatusLabel" 
                                   Text="" 
                                   FontSize="12"
                                   IsVisible="False" />
                        </VerticalStackLayout>
                    </Frame>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Button Text="ÐÐ°Ð·Ð°Ð´" Clicked="OnBackClicked" />
                        <Button Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ‚ÐµÐ¾Ñ€Ð¸ÑŽ" Clicked="OnCreateClicked" 
                                BackgroundColor="{DynamicResource PrimaryColor}" />
                    </Grid>

                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>