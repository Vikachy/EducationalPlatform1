<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="EducationalPlatform.MainPage"
    Title="Вход в систему"
    BackgroundColor="{DynamicResource BackgroundColor}">

    <Grid>
        <ScrollView>
            <VerticalStackLayout Spacing="25" Padding="30">
            <Label Text="Платформа обучения"
                   FontSize="32"
                   HorizontalOptions="Center"
                   TextColor="#2E86AB"
                   FontAttributes="Bold" />

            <Border Padding="25"
                    Stroke="#2E86AB"
                    StrokeThickness="1"
                    StrokeShape="RoundRectangle 15">
                <VerticalStackLayout Spacing="20">
                    <Label Text="Вход в систему"
                           FontSize="24"
                           HorizontalOptions="Center"
                           TextColor="#2E86AB"
                           FontAttributes="Bold" />

                    <Entry x:Name="UsernameEntry"
                           Placeholder="Логин" />

                    <!-- Кастомное поле пароля -->
                    <Grid x:Name="PasswordContainer"
                          ColumnDefinitions="*, Auto"
                          HeightRequest="50">
                        <Entry x:Name="PasswordEntry"
                               Grid.Column="0"
                               Placeholder="Пароль"
                               IsPassword="True" />
                        <Button x:Name="ShowPasswordBtn"
                                Grid.Column="1"
                                Text="👁"
                                BackgroundColor="Transparent"
                                TextColor="#2E86AB"
                                FontSize="20"
                                WidthRequest="50"
                                HeightRequest="50" />
                    </Grid>

                    <Border x:Name="CaptchaContainer"
                            IsVisible="False"
                            BackgroundColor="#FFF3CD"
                            Stroke="#856404"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 10"
                            Padding="15">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="Подтвердите, что вы не робот"
                                   FontSize="14"
                                   TextColor="#856404"
                                   HorizontalOptions="Center" />
                            <Grid ColumnDefinitions="*,Auto"
                                  ColumnSpacing="10"
                                  VerticalOptions="Center">
                                <Border Grid.Column="0"
                                        BackgroundColor="White"
                                        Stroke="#856404"
                                        StrokeThickness="1"
                                        StrokeShape="RoundRectangle 5"
                                        Padding="10"
                                        HeightRequest="40">
                                    <Label x:Name="CaptchaLabel"
                                           Text="ABCD12"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="#333"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center" />
                                </Border>
                                <Button Grid.Column="1"
                                        Text="🔄"
                                        x:Name="RefreshCaptchaButton"
                                        BackgroundColor="Transparent"
                                        TextColor="#856404"
                                        WidthRequest="40"
                                        HeightRequest="40" />
                            </Grid>
                            <Entry x:Name="CaptchaEntry"
                                   Placeholder="Введите код с картинки" />
                        </VerticalStackLayout>
                    </Border>

                    <Grid RowDefinitions="Auto,Auto" RowSpacing="10">
                        <Button x:Name="LoginBtn"
                                Grid.Row="0"
                                Text="Войти"
                                BackgroundColor="#2E86AB"
                                TextColor="White"
                                HeightRequest="50" />
                        <ActivityIndicator x:Name="LoginActivity"
                                            Grid.Row="1"
                                            IsVisible="False"
                                            IsRunning="False"
                                            Color="#2E86AB"
                                            HeightRequest="20" />
                    </Grid>

                    <Button x:Name="ForgotPasswordBtn"
                            Text="Забыли пароль?"
                            BackgroundColor="Transparent"
                            TextColor="#2E86AB"
                            HeightRequest="40" />

                    <Button x:Name="RegisterBtn"
                            Text="Создать аккаунт"
                            BackgroundColor="Transparent"
                            TextColor="#2E86AB"
                            BorderColor="#2E86AB"
                            BorderWidth="2"
                            HeightRequest="50" />
                </VerticalStackLayout>
            </Border>
            </VerticalStackLayout>
        </ScrollView>
        <Grid x:Name="FullScreenLoading" IsVisible="False" BackgroundColor="#80000000">
            <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="12">
                <ActivityIndicator IsRunning="True" Color="#FFFFFF" WidthRequest="48" HeightRequest="48" />
                <Label Text="Загрузка..." TextColor="White" />
            </VerticalStackLayout>
        </Grid>
    </Grid>
</ContentPage>